<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="./assets/img/apple-icon.png"
    />
    <link rel="icon" type="image/png" href="./assets/img/favicon.png" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
      Тухайн хүний зээлийн хуудас
    </title>
    <meta
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no"
      name="viewport"
    />
    <!--     Fonts and icons     -->
    <link
      href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200"
      rel="stylesheet"
    />
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="./assets/css/now-ui-kit.min.css" rel="stylesheet" />
    <link href="./assets/demo/demo.css" rel="stylesheet" />
    <script>
      const $ = require("jquery");
      const electron = require("electron");
      const ipc = electron.ipcRenderer;
      var id;
      ipc.send("get_customer");
      ipc.on("info_customer", function(evt, result) {
        if (result) {
          var user = result[0];
          id = user.id;
          $("#name").html(user.lastname + " " + user.firstname);
          $("#lastname").val(user.lastname);
          $("#firstname").val(user.firstname);
          $("#amount").val(user.amount || 0);
          $("#address").val(user.address);
          $("#phone").val(user.phone);
          user.status == null
            ? $("#status").val("0")
            : $("#status").val(user.status);
          $("#date").val(user.date);
          $("#info").val(user.info);
        } else window.location.replace("./users.html");
      });
    </script>
  </head>

  <body>
    <div class="section section-basic mt-5">
      <div class="container">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="./menu.html">Нүүр</a></li>
            <li class="breadcrumb-item">
              <a href="./users.html">Хэрэглэгч</a>
            </li>
            <li class="breadcrumb-item active">
              <a href="#">Тухайн хүний зээлийн хуудас</a>
            </li>
          </ol>
        </nav>
        <h3 class="title">Тухайн хүний зээлийн хуудас</h3>
        <h3 class="title p-0 mb-3" id="name"></h3>
        <div class="row">
          <div class="col-md-12">
            <div class="card p-3">
              <p class="text-center color-red" id="error"></p>
              <div class="row">
                <span style="font-size: 16px;" class="p-3"
                  >хэрэглэгчийн мэдээлэл</span
                >
              </div>
              <div class="row">
                <div class="col-md-4">
                  <div class="form-group inline-label">
                    <label for="lastname">овог</label>
                    <input
                      type="text"
                      class="form-control form-control-success"
                      id="lastname"
                    />
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group inline-label">
                    <label for="firstname">нэр</label>
                    <input
                      type="text"
                      class="form-control form-control-success"
                      id="firstname"
                    />
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group inline-label">
                    <label for="amount" style="width:153px">зээлийн дүн</label>
                    <input
                      type="number"
                      class="form-control form-control-success"
                      id="amount"
                    />
                  </div>
                </div>
              </div>
              <div class="row border-bottom">
                <div class="col-md-4">
                  <div class="form-group inline-label">
                    <label for="address">хаяг</label>
                    <input
                      type="text"
                      class="form-control form-control-success"
                      id="address"
                    />
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group inline-label">
                    <label for="phone">Утас</label>
                    <input
                      type="number"
                      class="form-control form-control-success"
                      id="phone"
                    />
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group inline-label">
                    <label for="status">төлөв</label>
                    <select name="status" id="status">
                      <option value="0">Идэвхгүй</option>
                      <option value="1">Төлөгдөөгүй</option>
                      <option value="2">Төлөгдсөн</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="row">
                <span style="font-size: 16px;" class="p-3"
                  >зээлийн мэдээлэл</span
                >
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group inline-label">
                    <label for="date" style="width: 151px;">он/сар/өдөр</label>
                    <input
                      type="text"
                      class="form-control form-control-success"
                      id="date"
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="float-right">
                    <a
                      href="#"
                      class="btn btn-outline-primary btn-round btn-sm"
                      id="remove"
                      >Устгах</a
                    >
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12 ">
                  <div class="form-group">
                    <textarea
                      class="form-control"
                      id="info"
                      style="min-height: 300px;"
                    ></textarea>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <div class="float-right">
                    <a
                      href="#"
                      class="btn btn-primary btn-round btn-sm"
                      id="save"
                      >Хадгалах</a
                    >
                    <a
                      href="./users.html"
                      class="btn btn-outline-primary btn-round btn-sm"
                      >Буцах</a
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="space-70"></div>
      </div>
    </div>
    <script>
      $("#save").click(function() {
        var lastname = $("#lastname").val();
        var firstname = $("#firstname").val();
        var amount = $("#amount").val();
        var status = $("#status").val();
        var address = $("#address").val();
        var phone = $("#phone").val();
        var date = $("#date").val();
        var info = $("#info").val();
        var data = [
          { lastname, firstname, amount, status, address, phone, date, info }
        ];
        if (
          lastname &&
          firstname &&
          amount &&
          address &&
          phone &&
          date &&
          info
        ) {
          ipc.send("update", { user: data[0], id });
          window.location.replace("./users.html");
        } else $("#error").html("Мэдээлэл ээ бүрэн оруулна уу");
      });
      $("#remove").click(function() {
        console.log(id);
        ipc.send("remove", { id });
        window.location.replace("./users.html");
      });
    </script>
  </body>
</html>
